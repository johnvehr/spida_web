{"ast":null,"code":"import _slicedToArray from \"/Users/johnvehr/Builder/kuuik/octoe_web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"/Users/johnvehr/Builder/kuuik/octoe_web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/johnvehr/Builder/kuuik/octoe_web/src/pages/hub/project.js\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport * as projectActions from \"../../redux/actions/projectActions\";\nimport * as taskActions from \"../../redux/actions/taskActions\";\nimport { bindActionCreators } from 'redux';\nimport TaskDrawerAdd from './taskDrawerAdd';\nimport TaskDrawerDetails from './taskDrawerDetails';\nimport PopoverNode from './popoverNode';\nimport { Badge, Card, CardBody, CardHeader, CardImg, CardTitle, Col, Container, DropdownItem, DropdownMenu, DropdownToggle, ListGroup, ListGroupItem, Row, UncontrolledDropdown } from \"reactstrap\";\nimport { MoreHorizontal } from \"react-feather\";\nimport avatar1 from \"../../assets/img/avatars/avatar.jpg\";\nimport avatar2 from \"../../assets/img/avatars/avatar-2.jpg\";\nimport avatar3 from \"../../assets/img/avatars/avatar-3.jpg\";\nimport { Calendar, Filter, RefreshCw } from \"react-feather\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons\";\nimport { Tooltip, Popover, Popconfirm, Message, Button, Drawer, Form, Input, Item, Icon, Menu, Progress } from 'antd';\nimport { Group } from '@vx/group';\nimport { Tree } from '@vx/hierarchy';\nimport { LinearGradient } from '@vx/gradient';\nimport { Zoom } from '@vx/zoom';\nimport { localPoint } from '@vx/event';\nimport { scaleLinear } from '@vx/scale';\nimport { hierarchy } from 'd3-hierarchy';\nimport { pointRadial } from 'd3-shape';\nimport { RectClipPath } from '@vx/clip-path';\nimport { LinkHorizontal, LinkVertical, LinkRadial, LinkHorizontalStep, LinkVerticalStep, LinkRadialStep, LinkHorizontalCurve, LinkVerticalCurve, LinkRadialCurve, LinkHorizontalLine, LinkVerticalLine, LinkRadialLine } from '@vx/shape'; //import Viewer from 'react-drag-n-zoom'\n\nconst TextArea = Input.TextArea;\n\nclass Project extends React.Component {\n  constructor() {\n    super();\n\n    this.newtaskChange = input => e => {\n      const name = e.target.name;\n      this.setState({\n        task: _objectSpread({}, this.state.task, {\n          [name]: e.target.value\n        })\n      });\n      console.log(this.state.task);\n    };\n\n    this.showDrawer = () => {\n      this.setState({\n        visible: true\n      });\n    };\n\n    this.onClose = () => {\n      this.setState({\n        visible: false,\n        new_task: false\n      });\n    };\n\n    this._deleteTaskFromParent = task => {\n      this.props.actions.deleteTaskFromParent(task);\n    };\n\n    this._addTaskToParent = (node, type) => {\n      let client_task_params = [this.props.match.params, node.data.id, type, this.state.task];\n      this.props.actions.addTaskToParent(client_task_params, this.props.account.subdomain);\n    };\n\n    this.retrieveTask = (id, action, type) => {\n      const api_type = type;\n\n      if (action == 'details') {\n        this.setState({\n          task: id.data\n        });\n      } else {\n        this.setState({\n          parent: id.data.id,\n          new_task: true,\n          type: api_type\n        });\n      } //this.showDrawer()\n\n    };\n\n    this.changeTranslate = (e, zoom, node) => {\n      const point = {\n        x: node.x,\n        y: node.y\n      };\n      console.log(point);\n      const inv = zoom.applyInverseToPoint({\n        x: 1000 / 2,\n        y: 500 / 2\n      });\n      zoom.translate({\n        translateX: inv.x - 500,\n        translateY: inv.y - 250\n      });\n      console.log(zoom); //zoom.scale({scaleX: 1.1, scaleY: 1.1, point })\n    };\n\n    this.state = {\n      layout: 'cartesian',\n      orientation: 'horizontal',\n      linkType: 'diagonal',\n      stepPercent: 0.5,\n      parent: '',\n      type: '',\n      project_id: '',\n      task: {\n        task_title: '',\n        task_desc: '',\n        status: 0,\n        priority: 0\n      },\n      new_task: false,\n      initialTransform: {\n        scaleX: 1.27,\n        scaleY: 1.27,\n        translateX: -211.62,\n        translateY: 162.59,\n        skewX: 0,\n        skewY: 0\n      }\n    };\n    this.retrieveTask = this.retrieveTask.bind(this);\n    this.newtaskChange = this.newtaskChange.bind(this);\n    this.newPriority = this.newPriority.bind(this);\n    this.newStatus = this.newStatus.bind(this);\n    this.changeTranslate = this.changeTranslate.bind(this);\n  }\n\n  componentDidMount() {\n    console.log(\"called did mount\");\n    const project_id = this.props.match.params;\n    this.props.actions.retrieveProject(project_id, this.props.match.params.subdomain);\n  }\n\n  newPriority(value) {\n    const new_priority = parseInt(value, 10);\n    this.setState({\n      task: _objectSpread({}, this.state.task, {\n        priority: new_priority\n      })\n    });\n    console.log(this.state.task.priority);\n  }\n\n  newStatus(value) {\n    const new_status = parseInt(value, 10);\n    this.setState({\n      task: _objectSpread({}, this.state.task, {\n        status: new_status\n      })\n    });\n    console.log(this.state.task.status);\n  }\n\n  render() {\n    const _this$props = this.props,\n          _this$props$width = _this$props.width,\n          width = _this$props$width === void 0 ? 1000 : _this$props$width,\n          _this$props$height = _this$props.height,\n          height = _this$props$height === void 0 ? 500 : _this$props$height,\n          _this$props$margin = _this$props.margin,\n          margin = _this$props$margin === void 0 ? {\n      top: 30,\n      left: 30,\n      right: 30,\n      bottom: 10\n    } : _this$props$margin;\n\n    if (this.props.project_status && !this.props.fetched_tasks) {\n      this.props.actions.projectTasks(this.props.project.id, this.props.account.subdomain);\n    }\n\n    const data = this.props.tasks;\n    const _this$state = this.state,\n          layout = _this$state.layout,\n          orientation = _this$state.orientation,\n          linkType = _this$state.linkType,\n          stepPercent = _this$state.stepPercent;\n    const innerWidth = width - margin.left - margin.right;\n    const innerHeight = height - margin.top - margin.bottom;\n    let origin;\n    let sizeWidth;\n    let sizeHeight;\n    let task_drawer;\n\n    switch (this.state.new_task) {\n      case false:\n        task_drawer = React.createElement(TaskDrawerDetails, {\n          task_details: this.state.task,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 257\n          },\n          __self: this\n        });\n        break;\n\n      case true:\n        task_drawer = React.createElement(TaskDrawerAdd, {\n          task_details: this.state.task,\n          newtaskChange: this.newtaskChange,\n          addTaskToParent: this._addTaskToParent,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 260\n          },\n          __self: this\n        });\n    }\n\n    if (layout === 'polar') {\n      origin = {\n        x: innerWidth / 2,\n        y: innerHeight / 2\n      };\n      sizeWidth = 2 * Math.PI;\n      sizeHeight = Math.min(innerWidth, innerHeight) / 2;\n    } else {\n      origin = {\n        x: 0,\n        y: 0\n      };\n\n      if (orientation === 'vertical') {\n        sizeWidth = innerWidth;\n        sizeHeight = innerHeight;\n      } else {\n        sizeWidth = innerHeight;\n        sizeHeight = innerWidth;\n      }\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }, React.createElement(Drawer, {\n      title: this.state.task.task_title,\n      placement: \"right\",\n      closable: false,\n      width: 400,\n      onClose: this.onClose,\n      visible: this.state.visible,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, task_drawer), React.createElement(Row, {\n      className: \"mb-2 mb-xl-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: \"auto\",\n      className: \"d-none d-sm-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303\n      },\n      __self: this\n    }, this.props.project.project_title)), React.createElement(Col, {\n      xs: \"auto\",\n      className: \"ml-auto text-right mt-n1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307\n      },\n      __self: this\n    }, React.createElement(Popover, {\n      placement: \"bottom\",\n      title: \"asd\",\n      content: \"asd\",\n      trigger: \"click\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"primary\",\n      className: \"shadow-sm mr-1 atn-btn-project\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: `/${this.props.account.subdomain}/projects`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311\n      },\n      __self: this\n    }, \"Project Hub\"))), React.createElement(Button, {\n      color: \"primary\",\n      className: \"shadow-sm mr-1 atn-btn-project\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314\n      },\n      __self: this\n    }, React.createElement(RefreshCw, {\n      className: \"feather\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    })))), React.createElement(Zoom, {\n      width: width,\n      height: height,\n      scaleXMin: 1 / 2,\n      scaleXMax: 4,\n      scaleYMin: 1 / 2,\n      scaleYMax: 4,\n      transformMatrix: this.state.initialTransform,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334\n      },\n      __self: this\n    }, zoom => {\n      return React.createElement(\"svg\", {\n        width: width,\n        height: height,\n        style: {\n          cursor: zoom.isDragging ? 'grabbing' : 'grab'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345\n        },\n        __self: this\n      }, React.createElement(RectClipPath, {\n        id: \"zoom-clip\",\n        width: 800,\n        height: 800,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }), React.createElement(LinearGradient, {\n        id: \"lg\",\n        from: \"#fd9b93\",\n        to: \"#fe6e9e\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347\n        },\n        __self: this\n      }), React.createElement(\"rect\", {\n        onWheel: zoom.handleWheel,\n        onMouseDown: zoom.dragStart,\n        onMouseMove: zoom.dragMove,\n        onMouseUp: zoom.dragEnd,\n        onMouseLeave: () => {\n          if (!zoom.isDragging) return;\n          zoom.dragEnd();\n        },\n        width: width,\n        height: height,\n        rx: 14,\n        fill: \"#faf8f0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }), React.createElement(Group, {\n        transform: zoom.toString(),\n        top: margin.top,\n        left: margin.left,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357\n        },\n        __self: this\n      }, React.createElement(Tree, {\n        root: hierarchy(data, d => d.isExpanded ? null : d.children),\n        size: [sizeWidth, sizeHeight],\n        separation: (a, b) => (a.parent == b.parent ? 1 : 0.5) / a.depth,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, data => React.createElement(Group, {\n        top: origin.y,\n        left: origin.x,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365\n        },\n        __self: this\n      }, data.links().map((link, i) => {\n        let LinkComponent;\n\n        if (layout === 'polar') {\n          if (linkType === 'step') {\n            LinkComponent = LinkRadialStep;\n          } else if (linkType === 'curve') {\n            LinkComponent = LinkRadialCurve;\n          } else if (linkType === 'line') {\n            LinkComponent = LinkRadialLine;\n          } else {\n            LinkComponent = LinkRadial;\n          }\n        } else {\n          if (orientation === 'vertical') {\n            if (linkType === 'step') {\n              LinkComponent = LinkVerticalStep;\n            } else if (linkType === 'curve') {\n              LinkComponent = LinkVerticalCurve;\n            } else if (linkType === 'line') {\n              LinkComponent = LinkVerticalLine;\n            } else {\n              LinkComponent = LinkVertical;\n            }\n          } else {\n            if (linkType === 'step') {\n              LinkComponent = LinkHorizontalStep;\n            } else if (linkType === 'curve') {\n              LinkComponent = LinkHorizontalCurve;\n            } else if (linkType === 'line') {\n              LinkComponent = LinkHorizontalLine;\n            } else {\n              LinkComponent = LinkHorizontal;\n            }\n          }\n        }\n\n        return React.createElement(LinkComponent, {\n          data: link,\n          percent: +stepPercent,\n          stroke: link.target.children ? '#153d8f' : '#eee',\n          strokeWidth: \"1\",\n          fill: \"none\",\n          key: i,\n          onClick: () => console.log(link),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 404\n          },\n          __self: this\n        });\n      }), data.descendants().map((node, key) => {\n        const width = 240;\n        const height = 90;\n        let top;\n        let left;\n\n        if (layout === 'polar') {\n          const _pointRadial = pointRadial(node.x, node.y),\n                _pointRadial2 = _slicedToArray(_pointRadial, 2),\n                radialX = _pointRadial2[0],\n                radialY = _pointRadial2[1];\n\n          top = radialY;\n          left = radialX;\n        } else {\n          if (orientation === 'vertical') {\n            top = node.y;\n            left = node.x;\n          } else {\n            top = node.x;\n            left = node.y;\n          }\n        }\n\n        return React.createElement(Group, {\n          top: top,\n          left: left,\n          key: key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 438\n          },\n          __self: this\n        }, node.depth === 0 && React.createElement(Popover, {\n          placement: \"rightTop\",\n          content: React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 440\n            },\n            __self: this\n          }, React.createElement(PopoverNode, {\n            name: \"Vertical icon\",\n            className: \"tab-vertical\",\n            retrieveTask: this.retrieveTask,\n            node: node,\n            update: this.forceUpdate,\n            deleteTask: this._deleteTaskFromParent,\n            task_details: this.state.task,\n            newtaskChange: this.newtaskChange,\n            newPriority: this.newPriority,\n            newStatus: this.newStatus,\n            addTaskToParent: this._addTaskToParent,\n            type: \"root\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 441\n            },\n            __self: this\n          })),\n          trigger: \"click\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 440\n          },\n          __self: this\n        }, React.createElement(\"circle\", {\n          r: 15,\n          fill: \"#fbd24b\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 457\n          },\n          __self: this\n        })), node.depth !== 0 && React.createElement(Popover, {\n          placement: \"rightTop\",\n          content: React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 465\n            },\n            __self: this\n          }, React.createElement(PopoverNode, {\n            name: \"Vertical icon\",\n            className: \"tab-vertical\",\n            retrieveTask: this.retrieveTask,\n            node: node,\n            update: this.forceUpdate,\n            deleteTask: this._deleteTaskFromParent,\n            task_details: this.state.task,\n            newtaskChange: this.newtaskChange,\n            newPriority: this.newPriority,\n            newStatus: this.newStatus,\n            addTaskToParent: this._addTaskToParent,\n            type: \"sub\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 466\n            },\n            __self: this\n          })),\n          trigger: \"click\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 465\n          },\n          __self: this\n        }, React.createElement(\"rect\", {\n          height: height,\n          width: width,\n          y: -height / 2,\n          x: -width / 2,\n          fill: '#fafafa',\n          stroke: node.data.children.length < 1 ? '#153d8f' : '#153d8f',\n          strokeWidth: 1,\n          strokeDasharray: node.data.children.length < 1 ? '2,2' : '0',\n          strokeOpacity: node.data.children.length < 1 ? 0.6 : 1,\n          rx: !node.data.children.length < 1 ? 4 : 10,\n          onClick: e => this.changeTranslate(e, zoom, node),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 481\n          },\n          __self: this\n        })), React.createElement(\"text\", {\n          dy: '.33em',\n          fontSize: 9,\n          fontFamily: \"FontAwesome\",\n          textAnchor: 'middle',\n          style: {\n            pointerEvents: 'none'\n          },\n          fill: node.depth === 0 ? '#71248e' : node.children ? 'white' : '#26deb0',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 497\n          },\n          __self: this\n        }, node.data.task_title));\n      })))));\n    }));\n  }\n\n}\n\nconst gatherTasks = task_state => {\n  console.log(task_state.children);\n  return task_state;\n};\n\nconst mapStateToProps = (state, props) => ({\n  account: state.user.account,\n  project: state.project.project,\n  project_status: state.project.project_status,\n  tasks: gatherTasks(Object.assign({}, state.task.tasks)),\n  fetched_tasks: state.task.fetched_tasks\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(_objectSpread({}, projectActions, {}, taskActions), dispatch)\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Project));","map":{"version":3,"sources":["/Users/johnvehr/Builder/kuuik/octoe_web/src/pages/hub/project.js"],"names":["React","connect","withRouter","Link","projectActions","taskActions","bindActionCreators","TaskDrawerAdd","TaskDrawerDetails","PopoverNode","Badge","Card","CardBody","CardHeader","CardImg","CardTitle","Col","Container","DropdownItem","DropdownMenu","DropdownToggle","ListGroup","ListGroupItem","Row","UncontrolledDropdown","MoreHorizontal","avatar1","avatar2","avatar3","Calendar","Filter","RefreshCw","FontAwesomeIcon","faPlus","Tooltip","Popover","Popconfirm","Message","Button","Drawer","Form","Input","Item","Icon","Menu","Progress","Group","Tree","LinearGradient","Zoom","localPoint","scaleLinear","hierarchy","pointRadial","RectClipPath","LinkHorizontal","LinkVertical","LinkRadial","LinkHorizontalStep","LinkVerticalStep","LinkRadialStep","LinkHorizontalCurve","LinkVerticalCurve","LinkRadialCurve","LinkHorizontalLine","LinkVerticalLine","LinkRadialLine","TextArea","Project","Component","constructor","newtaskChange","input","e","name","target","setState","task","state","value","console","log","showDrawer","visible","onClose","new_task","_deleteTaskFromParent","props","actions","deleteTaskFromParent","_addTaskToParent","node","type","client_task_params","match","params","data","id","addTaskToParent","account","subdomain","retrieveTask","action","api_type","parent","changeTranslate","zoom","point","x","y","inv","applyInverseToPoint","translate","translateX","translateY","layout","orientation","linkType","stepPercent","project_id","task_title","task_desc","status","priority","initialTransform","scaleX","scaleY","skewX","skewY","bind","newPriority","newStatus","componentDidMount","retrieveProject","new_priority","parseInt","new_status","render","width","height","margin","top","left","right","bottom","project_status","fetched_tasks","projectTasks","project","tasks","innerWidth","innerHeight","origin","sizeWidth","sizeHeight","task_drawer","Math","PI","min","project_title","cursor","isDragging","handleWheel","dragStart","dragMove","dragEnd","toString","d","isExpanded","children","a","b","depth","links","map","link","i","LinkComponent","descendants","key","radialX","radialY","forceUpdate","length","pointerEvents","gatherTasks","task_state","mapStateToProps","user","Object","assign","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport {connect} from \"react-redux\"\nimport {withRouter,Link} from \"react-router-dom\"\nimport * as projectActions from \"../../redux/actions/projectActions\"\nimport * as taskActions from \"../../redux/actions/taskActions\"\nimport {bindActionCreators} from 'redux';\n\nimport TaskDrawerAdd from './taskDrawerAdd'\nimport TaskDrawerDetails from './taskDrawerDetails'\nimport PopoverNode from './popoverNode'\n\nimport {\n  Badge,\n  Card,\n  CardBody,\n  CardHeader,\n  CardImg,\n  CardTitle,\n  Col,\n  Container,\n  DropdownItem,\n  DropdownMenu,\n  DropdownToggle,\n  ListGroup,\n  ListGroupItem,\n  Row,\n  UncontrolledDropdown\n} from \"reactstrap\";\n\nimport { MoreHorizontal } from \"react-feather\";\n\nimport avatar1 from \"../../assets/img/avatars/avatar.jpg\";\nimport avatar2 from \"../../assets/img/avatars/avatar-2.jpg\";\nimport avatar3 from \"../../assets/img/avatars/avatar-3.jpg\";\nimport { Calendar, Filter, RefreshCw } from \"react-feather\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons\";\nimport {\n  Tooltip,\n  Popover,\n  Popconfirm,\n  Message,\n  Button,\n  Drawer,\n  Form,\n  Input,\n  Item,\n  Icon,\n  Menu,\n  Progress\n} from 'antd'\nimport { Group } from '@vx/group';\nimport { Tree } from '@vx/hierarchy';\nimport { LinearGradient } from '@vx/gradient';\nimport {Zoom} from '@vx/zoom'\nimport {localPoint} from '@vx/event'\nimport {scaleLinear} from '@vx/scale'\nimport { hierarchy } from 'd3-hierarchy';\nimport { pointRadial } from 'd3-shape';\nimport { RectClipPath } from '@vx/clip-path';\nimport {\n  LinkHorizontal,\n  LinkVertical,\n  LinkRadial,\n  LinkHorizontalStep,\n  LinkVerticalStep,\n  LinkRadialStep,\n  LinkHorizontalCurve,\n  LinkVerticalCurve,\n  LinkRadialCurve,\n  LinkHorizontalLine,\n  LinkVerticalLine,\n  LinkRadialLine\n} from '@vx/shape';\n//import Viewer from 'react-drag-n-zoom'\n\n\nconst {TextArea} = Input\n\nclass Project extends React.Component {\n  constructor(){\n    super()\n    this.state = {\n      layout: 'cartesian',\n      orientation: 'horizontal',\n      linkType: 'diagonal',\n      stepPercent: 0.5,\n      parent: '',\n      type: '',\n      project_id: '',\n      task: {\n        task_title: '',\n        task_desc: '',\n        status: 0,\n        priority: 0\n      },\n      new_task:false,\n      initialTransform: {\n        scaleX: 1.27,\n        scaleY: 1.27,\n        translateX: -211.62,\n        translateY: 162.59,\n        skewX: 0,\n        skewY: 0\n      }\n    };\n    this.retrieveTask = this.retrieveTask.bind(this)\n    this.newtaskChange = this.newtaskChange.bind(this)\n    this.newPriority = this.newPriority.bind(this)\n    this.newStatus = this.newStatus.bind(this)\n    this.changeTranslate = this.changeTranslate.bind(this)\n  }\n\n  componentDidMount() {\n    console.log(\"called did mount\")\n    const project_id = this.props.match.params\n    this.props.actions.retrieveProject(project_id,this.props.match.params.subdomain)\n  }\n\n  newPriority (value){\n    const new_priority = parseInt(value,10)\n    this.setState({\n      task: {\n        ...this.state.task,\n        priority: new_priority\n      }\n    })\n    console.log(this.state.task.priority)\n  }\n\n  newStatus (value){\n    const new_status = parseInt(value,10)\n    this.setState({\n      task: {\n        ...this.state.task,\n        status: new_status\n      }\n    })\n    console.log(this.state.task.status)\n  }\n\n\n  newtaskChange = input => e => {\n    const name = e.target.name\n    this.setState({\n      task: {\n        ...this.state.task,\n        [name]: e.target.value\n      }\n    })\n    console.log(this.state.task)\n  }\n\n  showDrawer = () => {\n    this.setState({\n      visible: true\n    })\n  }\n\n  onClose = () => {\n    this.setState({\n      visible: false,\n      new_task: false\n    })\n  }\n\n  _deleteTaskFromParent = (task) => {\n    this.props.actions.deleteTaskFromParent(task)\n  }\n\n  _addTaskToParent = (node,type) => {\n\n    let client_task_params = [\n      this.props.match.params,\n      node.data.id,\n      type,\n      this.state.task\n    ]\n    this.props.actions.addTaskToParent(client_task_params, this.props.account.subdomain)\n  }\n\n/*\n  _addTaskToParent = (e) => {\n    e.preventDefault()\n    let client_task_params = [\n      this.props.match.params,\n      this.state.parent,\n      this.state.type,\n      this.state.task\n    ]\n    this.props.actions.addTaskToParent(client_task_params, this.props.account.subdomain)\n    this.setState({\n      task: {\n        task_title: '',\n        task_desc: ''\n      }\n    })\n  }\n*/\n  retrieveTask = (id,action,type) => {\n    const api_type = type\n    if(action == 'details'){\n      this.setState({\n        task: id.data\n      })\n    }else {\n      this.setState({\n        parent: id.data.id,\n        new_task: true,\n        type: api_type\n      })\n    }\n    //this.showDrawer()\n  }\n\n  changeTranslate = (e,zoom,node) => {\n    const point = {x: node.x, y: node.y}\n    console.log(point)\n    const inv = zoom.applyInverseToPoint({x: 1000 / 2, y: 500 / 2})\n    zoom.translate({translateX: inv.x - 500, translateY: inv.y - 250})\n    console.log(zoom)\n//zoom.scale({scaleX: 1.1, scaleY: 1.1, point })\n\n  }\n\n  render() {\n    const {\n      width = 1000,\n      height = 500,\n      margin = {\n        top: 30,\n        left: 30,\n        right: 30,\n        bottom: 10\n      }\n    } = this.props;\n\n    if(this.props.project_status && !this.props.fetched_tasks){\n      this.props.actions.projectTasks(this.props.project.id,this.props.account.subdomain)\n    }\n\n    const data = this.props.tasks\n\n    const { layout, orientation, linkType, stepPercent } = this.state;\n\n    const innerWidth = width - margin.left - margin.right;\n    const innerHeight = height - margin.top - margin.bottom;\n\n\n    let origin;\n    let sizeWidth;\n    let sizeHeight;\n\n    let task_drawer\n    switch(this.state.new_task){\n      case false:\n        task_drawer = <TaskDrawerDetails task_details={this.state.task} />\n        break;\n      case true:\n        task_drawer = <TaskDrawerAdd\n                        task_details={this.state.task}\n                        newtaskChange={this.newtaskChange}\n                        addTaskToParent={this._addTaskToParent}\n                      />\n    }\n\n    if (layout === 'polar') {\n      origin = {\n        x: innerWidth / 2,\n        y: innerHeight / 2\n      };\n      sizeWidth = 2 * Math.PI;\n      sizeHeight = Math.min(innerWidth, innerHeight) / 2;\n    } else {\n      origin = { x: 0, y: 0 };\n      if (orientation === 'vertical') {\n        sizeWidth = innerWidth;\n        sizeHeight = innerHeight;\n      } else {\n        sizeWidth = innerHeight;\n        sizeHeight = innerWidth;\n      }\n    }\n\n    return (\n      <div>\n\n      <Drawer\n        title={this.state.task.task_title}\n        placement=\"right\"\n        closable={false}\n        width={400}\n        onClose={this.onClose}\n        visible={this.state.visible}\n        >\n        {task_drawer}\n      </Drawer>\n\n\n\n      <Row className=\"mb-2 mb-xl-4\">\n      <Col xs=\"auto\" className=\"d-none d-sm-block\">\n        <h3>{this.props.project.project_title}</h3>\n      </Col>\n\n\n      <Col xs=\"auto\" className=\"ml-auto text-right mt-n1\">\n\n      <Popover placement=\"bottom\" title=\"asd\" content=\"asd\" trigger=\"click\">\n      <Button color=\"primary\" className=\"shadow-sm mr-1 atn-btn-project\">\n        <Link to={`/${this.props.account.subdomain}/projects`}>Project Hub</Link>\n      </Button>\n      </Popover>\n      <Button color=\"primary\" className=\"shadow-sm mr-1 atn-btn-project\">\n        <RefreshCw className=\"feather\" />\n      </Button>\n\n      {/*  <UncontrolledDropdown className=\"d-inline mr-2\">\n          <DropdownToggle caret color=\"light\" className=\"bg-white shadow-sm\">\n            <Calendar className=\"feather align-middle mt-n1\" /> Today\n          </DropdownToggle>\n          <DropdownMenu right>\n            <DropdownItem>Action</DropdownItem>\n            <DropdownItem>Another Action</DropdownItem>\n            <DropdownItem>Something else here</DropdownItem>\n            <DropdownItem divider />\n            <DropdownItem>Seperated link</DropdownItem>\n          </DropdownMenu>\n        </UncontrolledDropdown>*/}\n\n      </Col>\n    </Row>\n\n    <Zoom\n      width={width}\n      height={height}\n      scaleXMin={1 / 2}\n      scaleXMax={4}\n      scaleYMin={1 / 2}\n      scaleYMax={4}\n      transformMatrix={this.state.initialTransform}\n    >\n    {zoom => {\n      return(\n        <svg width={width} height={height} style={{ cursor: zoom.isDragging ? 'grabbing' : 'grab' }}>\n          <RectClipPath id=\"zoom-clip\" width={800} height={800} />\n          <LinearGradient  id=\"lg\" from=\"#fd9b93\" to=\"#fe6e9e\" />\n          <rect onWheel={zoom.handleWheel}\n                  onMouseDown={zoom.dragStart}\n                  onMouseMove={zoom.dragMove}\n                  onMouseUp={zoom.dragEnd}\n                  onMouseLeave={() => {\n                    if (!zoom.isDragging) return;\n                    zoom.dragEnd();\n                  }} width={width} height={height} rx={14} fill=\"#faf8f0\" />\n\n          <Group transform={zoom.toString()} top={margin.top} left={margin.left}>\n            <Tree\n              root={hierarchy(data, d => (d.isExpanded ? null : d.children))}\n              size={[sizeWidth, sizeHeight]}\n              separation={(a, b) => (a.parent == b.parent ? 1 : 0.5) / a.depth}\n\n            >\n              {data => (\n                <Group top={origin.y} left={origin.x}>\n                  {data.links().map((link, i) => {\n                    let LinkComponent;\n\n                    if (layout === 'polar') {\n                      if (linkType === 'step') {\n                        LinkComponent = LinkRadialStep;\n                      } else if (linkType === 'curve') {\n                        LinkComponent = LinkRadialCurve;\n                      } else if (linkType === 'line') {\n                        LinkComponent = LinkRadialLine;\n                      } else {\n                        LinkComponent = LinkRadial;\n                      }\n                    } else {\n                      if (orientation === 'vertical') {\n                        if (linkType === 'step') {\n                          LinkComponent = LinkVerticalStep;\n                        } else if (linkType === 'curve') {\n                          LinkComponent = LinkVerticalCurve;\n                        } else if (linkType === 'line') {\n                          LinkComponent = LinkVerticalLine;\n                        } else {\n                          LinkComponent = LinkVertical;\n                        }\n                      } else {\n                        if (linkType === 'step') {\n                          LinkComponent = LinkHorizontalStep;\n                        } else if (linkType === 'curve') {\n                          LinkComponent = LinkHorizontalCurve;\n                        } else if (linkType === 'line') {\n                          LinkComponent = LinkHorizontalLine;\n                        } else {\n                          LinkComponent = LinkHorizontal;\n                        }\n                      }\n                    }\n\n                    return (\n                      <LinkComponent\n                        data={link}\n                        percent={+stepPercent}\n                        stroke={link.target.children ? '#153d8f' : '#eee'}\n                        strokeWidth=\"1\"\n                        fill=\"none\"\n                        key={i}\n                        onClick={() => console.log(link)}\n                      />\n                    );\n                  })}\n\n                  {data.descendants().map((node, key) => {\n                    const width = 240;\n                    const height = 90;\n\n                    let top;\n                    let left;\n                    if (layout === 'polar') {\n                      const [radialX, radialY] = pointRadial(node.x, node.y);\n                      top = radialY;\n                      left = radialX;\n                    } else {\n                      if (orientation === 'vertical') {\n                        top = node.y;\n                        left = node.x;\n                      } else {\n                        top = node.x;\n                        left = node.y;\n                      }\n                    }\n\n                    return (\n\n                      <Group top={top} left={left} key={key}>\n                        {node.depth === 0 && (\n                            <Popover placement=\"rightTop\" content={(<div>\n                              <PopoverNode\n                                name=\"Vertical icon\"\n                                className=\"tab-vertical\"\n                                retrieveTask={this.retrieveTask}\n                                node={node}\n                                update={this.forceUpdate}\n                                deleteTask={this._deleteTaskFromParent}\n                                task_details={this.state.task}\n                                newtaskChange={this.newtaskChange}\n                                newPriority={this.newPriority}\n                                newStatus={this.newStatus}\n                                addTaskToParent={this._addTaskToParent}\n                                type='root'\n\n                              />\n                              </div>)} trigger=\"click\">\n                          <circle\n                            r={15}\n                            fill=\"#fbd24b\"\n\n                          />\n                          </Popover>\n                        )}\n                        {node.depth !== 0 && (\n                          <Popover placement=\"rightTop\" content={(<div>\n                            <PopoverNode\n                              name=\"Vertical icon\"\n                              className=\"tab-vertical\"\n                              retrieveTask={this.retrieveTask}\n                              node={node}\n                              update={this.forceUpdate}\n                              deleteTask={this._deleteTaskFromParent}\n                              task_details={this.state.task}\n                              newtaskChange={this.newtaskChange}\n                              newPriority={this.newPriority}\n                              newStatus={this.newStatus}\n                              addTaskToParent={this._addTaskToParent}\n                              type='sub'\n                            />\n                          </div>)} trigger=\"click\">\n                          <rect\n                            height={height}\n                            width={width}\n                            y={-height / 2}\n                            x={-width / 2}\n                            fill={'#fafafa'}\n                            stroke={node.data.children.length < 1 ? '#153d8f' : '#153d8f'}\n                            strokeWidth={1}\n                            strokeDasharray={node.data.children.length < 1 ? '2,2' : '0'}\n                            strokeOpacity={node.data.children.length < 1 ? 0.6 : 1}\n                            rx={!node.data.children.length < 1 ? 4 : 10}\n                            onClick={(e)=> this.changeTranslate(e,zoom,node)}\n\n                          />\n                          </Popover>\n                        )}\n                        <text\n                          dy={'.33em'}\n                          fontSize={9}\n                          fontFamily=\"FontAwesome\"\n                          textAnchor={'middle'}\n                          style={{ pointerEvents: 'none' }}\n                          fill={node.depth === 0 ? '#71248e' : node.children ? 'white' : '#26deb0'}\n                        >\n                          {node.data.task_title}\n                        </text>\n                      </Group>\n\n                    );\n                  })}\n                </Group>\n\n              )}\n            </Tree>\n          </Group>\n        </svg>\n      )\n    }}\n\n        </Zoom>\n      </div>\n    );\n  }\n}\n\n\nconst gatherTasks = (task_state) => {\n  console.log(task_state.children)\n  return task_state\n}\n\nconst mapStateToProps = (state, props) => ({\n  account: state.user.account,\n  project: state.project.project,\n  project_status: state.project.project_status,\n  tasks: gatherTasks(Object.assign({},state.task.tasks)),\n  fetched_tasks: state.task.fetched_tasks\n  }\n)\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators({...projectActions,...taskActions}, dispatch)\n  };\n}\n\nexport default withRouter(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(Project)\n)\n"]},"metadata":{},"sourceType":"module"}