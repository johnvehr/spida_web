{"ast":null,"code":"import _objectSpread from \"/Users/johnvehr/Builder/kuuik/octoe_web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/johnvehr/Builder/kuuik/octoe_web/src/pages/hub/project.js\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport * as projectActions from \"../../redux/actions/projectActions\";\nimport * as taskActions from \"../../redux/actions/taskActions\";\nimport { bindActionCreators } from 'redux';\nimport TaskDrawerAdd from './taskDrawerAdd';\nimport TaskDrawerDetails from './taskDrawerDetails';\nimport PopoverNode from './popoverNode';\nimport ProjectHeader from './projectHeader';\nimport ProjectStatistic from './projectStatistic';\nimport ProjectGram from './projectGram';\nimport ProjectGramBig from './projectGramBig';\nimport ProjectCalendar from './projectCalendar';\nimport classnames from \"classnames\";\nimport { Badge, Card, CardBody, CardHeader, CardImg, CardTitle, Col, Container, DropdownItem, DropdownMenu, DropdownToggle, ListGroup, ListGroupItem, Row, UncontrolledDropdown, Nav, NavItem, NavLink, TabContent, TabPane } from \"reactstrap\";\nimport { MoreHorizontal } from \"react-feather\";\nimport avatar1 from \"../../assets/img/avatars/avatar.jpg\";\nimport avatar2 from \"../../assets/img/avatars/avatar-2.jpg\";\nimport avatar3 from \"../../assets/img/avatars/avatar-3.jpg\";\nimport { Calendar, Filter, RefreshCw } from \"react-feather\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons\";\nimport { message, Tooltip, Popover, Popconfirm, Message, Button, Drawer, Form, Input, Item, Icon, Menu, Progress, Checkbox } from 'antd';\nimport { Group } from '@vx/group';\nimport { Tree } from '@vx/hierarchy';\nimport { LinearGradient } from '@vx/gradient';\nimport { Zoom } from '@vx/zoom';\nimport { localPoint } from '@vx/event';\nimport { scaleLinear } from '@vx/scale';\nimport { hierarchy } from 'd3-hierarchy';\nimport { pointRadial } from 'd3-shape';\nimport { RectClipPath } from '@vx/clip-path';\nimport { LinkHorizontal, LinkVertical, LinkRadial, LinkHorizontalStep, LinkVerticalStep, LinkRadialStep, LinkHorizontalCurve, LinkVerticalCurve, LinkRadialCurve, LinkHorizontalLine, LinkVerticalLine, LinkRadialLine } from '@vx/shape'; //import Viewer from 'react-drag-n-zoom'\n\nconst TextArea = Input.TextArea;\n\nclass Project extends React.Component {\n  constructor() {\n    super();\n\n    this.newDueType = e => {\n      this.setState({\n        task: _objectSpread({}, this.state.task, {\n          due_type: e.target.value\n        })\n      });\n    };\n\n    this.addTaskTags = incoming_tag => {\n      this.setState({\n        task: _objectSpread({}, this.state.task, {\n          task_tag_list: incoming_tag.target.value\n        })\n      });\n    };\n\n    this.newtaskChange = input => e => {\n      const name = e.target.name;\n      this.setState({\n        task: _objectSpread({}, this.state.task, {\n          [name]: e.target.value\n        })\n      });\n      console.log(this.state.task);\n    };\n\n    this.showDrawer = () => {\n      this.setState({\n        visible: true\n      });\n    };\n\n    this.onClose = () => {\n      this.setState({\n        visible: false,\n        new_task: false\n      });\n    };\n\n    this._deleteTaskFromParent = task_id => {\n      this.props.actions.deleteTaskFromParent(task_id, this.props.account.subdomain);\n      message.success('Task Deleted');\n    };\n\n    this._addTaskToParent = (node, type) => {\n      console.log(this.state.task);\n      let client_task_params = [this.props.match.params, node.data.id, type, this.state.task];\n      this.props.actions.addTaskToParent(client_task_params, this.props.account.subdomain);\n      message.success('New Task Added');\n    };\n\n    this.assignedPipeline = data => {\n      this.setState({\n        spida_filter: _objectSpread({}, this.state.spida_filter, {\n          assigned_to: !this.state.spida_filter.assigned_to\n        })\n      });\n    };\n\n    this.checkLinkScope = (node_source_target_id, type) => {\n      switch (this.state.spida_filter.assigned_to) {\n        case true:\n          if (node_source_target_id == 72) {\n            return type == 'link' ? '#ff3d01' : '#9acb34';\n          } else {\n            return type == 'link' ? '#ff3d01' : '#fffdf4';\n          }\n\n          break;\n\n        case false:\n          return type == 'link' ? '#f14603' : '#fffdf4';\n          break;\n      }\n    };\n\n    this.retrieveTask = (id, action, type) => {\n      const api_type = type;\n\n      if (action == 'details') {\n        this.setState({\n          task: id.data\n        });\n      } else {\n        this.setState({\n          parent: id.data.id,\n          new_task: true,\n          type: api_type\n        });\n      } //this.showDrawer()\n\n    };\n\n    this.changeTranslate = (e, zoom, node) => {\n      console.log(node); //const point = localPoint(e)\n      //const point = {x: -434.39004605833225, y: 500 / 2}\n      //console.log(point)\n      //console.log(point)\n\n      const inv = zoom.applyInverseToPoint({\n        x: 1000 / 2,\n        y: 500 / 2\n      });\n      console.log(inv); //zoom.setTranslate({translateX: 1000 / 2, translateY: 500 / 2})\n      //zoom.scale({scaleX: 1.1, scaleY: 1.1})\n      //-434.39004605833225 x\n      //4.164458423229405 y\n\n      console.log(zoom); //  zoom.scale({scaleX: 1.1, scaleY: 1.1, point})\n    };\n\n    this.state = {\n      activeTab: \"1\",\n      layout: 'cartesian',\n      orientation: 'horizontal',\n      linkType: 'diagonal',\n      stepPercent: 0.5,\n      parent: '',\n      type: '',\n      project_id: '',\n      task: {\n        task_title: '',\n        task_desc: '',\n        status: '',\n        priority: '',\n        assigned_to: '',\n        created_by: '',\n        due_type: 'asap',\n        start_date: '',\n        end_date: '',\n        task_tag_list: []\n      },\n      new_task: false,\n      initialTransform: {\n        scaleX: 1.27,\n        scaleY: 1.27,\n        translateX: -211.62,\n        translateY: 162.59,\n        skewX: 0,\n        skewY: 0\n      },\n      spida_filter: {\n        assigned_to: false,\n        due_asap: false,\n        due_this_week: false\n      },\n      spida_tasks: {}\n    };\n    this.retrieveTask = this.retrieveTask.bind(this);\n    this.newtaskChange = this.newtaskChange.bind(this);\n    this.newAssignTo = this.newAssignTo.bind(this);\n    this.newPriority = this.newPriority.bind(this);\n    this.newStatus = this.newStatus.bind(this);\n    this.changeTranslate = this.changeTranslate.bind(this);\n    this.toggle = this.toggle.bind(this);\n    this.assignedPipeline = this.assignedPipeline.bind(this);\n    this.dateRange = this.dateRange.bind(this);\n    this.addTaskTags = this.addTaskTags.bind(this);\n  }\n\n  toggle(tab) {\n    if (this.state.activeTab !== tab) {\n      this.setState({\n        activeTab: tab\n      });\n    }\n  }\n\n  componentDidMount() {\n    console.log(\"called did mount\");\n    const project_id = this.props.match.params;\n    this.props.actions.retrieveProject(project_id, this.props.match.params.subdomain);\n  }\n\n  newAssignTo(value) {\n    this.setState({\n      task: _objectSpread({}, this.state.task, {\n        assigned_to: value\n      })\n    });\n  }\n\n  newPriority(value) {\n    const new_priority = parseInt(value, 10);\n    this.setState({\n      task: _objectSpread({}, this.state.task, {\n        priority: new_priority\n      })\n    });\n  }\n\n  newStatus(value) {\n    const new_status = parseInt(value, 10);\n    this.setState({\n      task: _objectSpread({}, this.state.task, {\n        status: new_status\n      })\n    });\n  }\n\n  dateRange(dates, dateStrings) {\n    this.setState({\n      task: _objectSpread({}, this.state.task, {\n        start_date: dateStrings[0],\n        end_date: dateStrings[1]\n      })\n    });\n    console.log(this.state.task.start_date);\n  }\n\n  render() {\n    console.log(this.props.account);\n    console.log(this.props.account_users);\n    const _this$props = this.props,\n          name = _this$props.name,\n          className = _this$props.className;\n    const _this$props2 = this.props,\n          _this$props2$width = _this$props2.width,\n          width = _this$props2$width === void 0 ? 1200 : _this$props2$width,\n          _this$props2$height = _this$props2.height,\n          height = _this$props2$height === void 0 ? 400 : _this$props2$height,\n          _this$props2$margin = _this$props2.margin,\n          margin = _this$props2$margin === void 0 ? {\n      top: 10,\n      left: 10,\n      right: 10,\n      bottom: 10\n    } : _this$props2$margin;\n\n    if (this.props.project_status && !this.props.fetched_tasks) {\n      this.props.actions.projectTasks(this.props.project.id, this.props.account.subdomain);\n    } //, d => (d.isExpanded ? null : d.children)\n\n\n    const data = this.props.tasks;\n    const _this$state = this.state,\n          layout = _this$state.layout,\n          orientation = _this$state.orientation,\n          linkType = _this$state.linkType,\n          stepPercent = _this$state.stepPercent;\n    const innerWidth = width - margin.left - margin.right;\n    const innerHeight = height - margin.top - margin.bottom;\n    let origin;\n    let sizeWidth;\n    let sizeHeight;\n    let task_drawer;\n\n    switch (this.state.new_task) {\n      case false:\n        task_drawer = React.createElement(TaskDrawerDetails, {\n          task_details: this.state.task,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 374\n          },\n          __self: this\n        });\n        break;\n\n      case true:\n        task_drawer = React.createElement(TaskDrawerAdd, {\n          task_details: this.state.task,\n          newtaskChange: this.newtaskChange,\n          addTaskToParent: this._addTaskToParent,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 377\n          },\n          __self: this\n        });\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387\n      },\n      __self: this\n    }, React.createElement(Container, {\n      fluid: true,\n      className: \"p-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388\n      },\n      __self: this\n    }, React.createElement(ProjectHeader, {\n      props: this.props,\n      toggleLink: this.toggle,\n      assignedPipeline: this.assignedPipeline,\n      spida_filter_assigned_to: this.state.spida_filter.assigned_to,\n      spida_filter_due_asap: this.state.spida_filter.due_asap,\n      spida_filter_due_this_week: this.state.spida_filter.due_this_week,\n      data: data,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"popovertab tab \" + className,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398\n      },\n      __self: this\n    }, React.createElement(TabContent, {\n      style: {\n        background: '#f3f0e3'\n      },\n      activeTab: this.state.activeTab,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400\n      },\n      __self: this\n    }, React.createElement(TabPane, {\n      tabId: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401\n      },\n      __self: this\n    }, React.createElement(ProjectGramBig, {\n      user: this.props.user,\n      state: this.state,\n      props: this.props,\n      project: this.props.project,\n      retrieveTask: this.retrieveTask,\n      deleteTask: this._deleteTaskFromParent,\n      task_details: this.state.task,\n      newtaskChange: this.newtaskChange,\n      newDueType: this.newDueType,\n      newAssignTo: this.newAssignTo,\n      newPriority: this.newPriority,\n      newStatus: this.newStatus,\n      addTaskToParent: this._addTaskToParent,\n      account_users: this.props.account_users,\n      project_team_members: this.props.project_team_members,\n      changeTranslate: this.changeTranslate,\n      assignedPipeline: this.assignedPipeline,\n      spida_filter: this.state.spida_filter,\n      checkLinkScope: this.checkLinkScope,\n      dateRange: this.dateRange,\n      spida_tasks: data,\n      addTaskTags: this.addTaskTags,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402\n      },\n      __self: this\n    })), React.createElement(TabPane, {\n      tabId: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 429\n      },\n      __self: this\n    }, React.createElement(ProjectStatistic, {\n      props: this.props,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430\n      },\n      __self: this\n    }), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: \"8\",\n      className: \"d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434\n      },\n      __self: this\n    }, React.createElement(ProjectGram, {\n      data: data,\n      user: this.props.user,\n      state: this.state,\n      props: this.props,\n      project: this.props.project,\n      retrieveTask: this.retrieveTask,\n      deleteTask: this._deleteTaskFromParent,\n      task_details: this.state.task,\n      newDueType: this.newDueType,\n      newAssignTo: this.newAssignTo,\n      newtaskChange: this.newtaskChange,\n      newPriority: this.newPriority,\n      newStatus: this.newStatus,\n      addTaskToParent: this._addTaskToParent,\n      account_users: this.props.account_users,\n      project_team_members: this.props.project_team_members,\n      changeTranslate: this.changeTranslate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 435\n      },\n      __self: this\n    })), React.createElement(Col, {\n      lg: \"4\",\n      className: \"d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 455\n      },\n      __self: this\n    })), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 459\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: \"6\",\n      xl: \"4\",\n      className: \"d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 460\n      },\n      __self: this\n    }), React.createElement(Col, {\n      lg: \"6\",\n      xl: \"4\",\n      className: \"d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 463\n      },\n      __self: this\n    }), React.createElement(Col, {\n      lg: \"6\",\n      xl: \"4\",\n      className: \"d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 466\n      },\n      __self: this\n    })), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 470\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: \"6\",\n      xl: \"8\",\n      className: \"d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 471\n      },\n      __self: this\n    }), React.createElement(Col, {\n      lg: \"6\",\n      xl: \"4\",\n      className: \"d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 474\n      },\n      __self: this\n    }))), React.createElement(TabPane, {\n      tabId: \"3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"tab-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 480\n      },\n      __self: this\n    }, \"Another one\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 481\n      },\n      __self: this\n    }, \"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor tellus eget condimentum rhoncus. Aenean massa. Cum sociis natoque penatibus et magnis neque dis parturient montes, nascetur ridiculus mus.\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 487\n      },\n      __self: this\n    }, \"Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo.\")), React.createElement(TabPane, {\n      tabId: \"4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 494\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"tab-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 495\n      },\n      __self: this\n    }, \"Calender\"), React.createElement(ProjectCalendar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 496\n      },\n      __self: this\n    })))), React.createElement(Drawer, {\n      title: this.state.task.task_title,\n      placement: \"right\",\n      closable: false,\n      width: 400,\n      onClose: this.onClose,\n      visible: this.state.visible,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 501\n      },\n      __self: this\n    }, task_drawer)));\n  }\n\n}\n\nconst gatherTasks = task_state => {\n  return task_state;\n};\n\nconst mapStateToProps = (state, props) => ({\n  user: state.user.user,\n  account: state.user.account,\n  account_users: state.user.account_users,\n  project: state.project.project,\n  project_team_members: state.project.project_team_members,\n  project_status: state.project.project_status,\n  tasks: gatherTasks(Object.assign({}, state.task.tasks)),\n  fetched_tasks: state.task.fetched_tasks\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(_objectSpread({}, projectActions, {}, taskActions), dispatch)\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Project));","map":{"version":3,"sources":["/Users/johnvehr/Builder/kuuik/octoe_web/src/pages/hub/project.js"],"names":["React","connect","withRouter","Link","projectActions","taskActions","bindActionCreators","TaskDrawerAdd","TaskDrawerDetails","PopoverNode","ProjectHeader","ProjectStatistic","ProjectGram","ProjectGramBig","ProjectCalendar","classnames","Badge","Card","CardBody","CardHeader","CardImg","CardTitle","Col","Container","DropdownItem","DropdownMenu","DropdownToggle","ListGroup","ListGroupItem","Row","UncontrolledDropdown","Nav","NavItem","NavLink","TabContent","TabPane","MoreHorizontal","avatar1","avatar2","avatar3","Calendar","Filter","RefreshCw","FontAwesomeIcon","faPlus","message","Tooltip","Popover","Popconfirm","Message","Button","Drawer","Form","Input","Item","Icon","Menu","Progress","Checkbox","Group","Tree","LinearGradient","Zoom","localPoint","scaleLinear","hierarchy","pointRadial","RectClipPath","LinkHorizontal","LinkVertical","LinkRadial","LinkHorizontalStep","LinkVerticalStep","LinkRadialStep","LinkHorizontalCurve","LinkVerticalCurve","LinkRadialCurve","LinkHorizontalLine","LinkVerticalLine","LinkRadialLine","TextArea","Project","Component","constructor","newDueType","e","setState","task","state","due_type","target","value","addTaskTags","incoming_tag","task_tag_list","newtaskChange","input","name","console","log","showDrawer","visible","onClose","new_task","_deleteTaskFromParent","task_id","props","actions","deleteTaskFromParent","account","subdomain","success","_addTaskToParent","node","type","client_task_params","match","params","data","id","addTaskToParent","assignedPipeline","spida_filter","assigned_to","checkLinkScope","node_source_target_id","retrieveTask","action","api_type","parent","changeTranslate","zoom","inv","applyInverseToPoint","x","y","activeTab","layout","orientation","linkType","stepPercent","project_id","task_title","task_desc","status","priority","created_by","start_date","end_date","initialTransform","scaleX","scaleY","translateX","translateY","skewX","skewY","due_asap","due_this_week","spida_tasks","bind","newAssignTo","newPriority","newStatus","toggle","dateRange","tab","componentDidMount","retrieveProject","new_priority","parseInt","new_status","dates","dateStrings","render","account_users","className","width","height","margin","top","left","right","bottom","project_status","fetched_tasks","projectTasks","project","tasks","innerWidth","innerHeight","origin","sizeWidth","sizeHeight","task_drawer","background","user","project_team_members","gatherTasks","task_state","mapStateToProps","Object","assign","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport {connect} from \"react-redux\"\nimport {withRouter,Link} from \"react-router-dom\"\nimport * as projectActions from \"../../redux/actions/projectActions\"\nimport * as taskActions from \"../../redux/actions/taskActions\"\nimport {bindActionCreators} from 'redux';\n\nimport TaskDrawerAdd from './taskDrawerAdd'\nimport TaskDrawerDetails from './taskDrawerDetails'\nimport PopoverNode from './popoverNode'\nimport ProjectHeader from './projectHeader'\nimport ProjectStatistic from './projectStatistic'\nimport ProjectGram from './projectGram'\nimport ProjectGramBig from './projectGramBig'\nimport ProjectCalendar from './projectCalendar'\n\nimport classnames from \"classnames\";\nimport {\n  Badge,\n  Card,\n  CardBody,\n  CardHeader,\n  CardImg,\n  CardTitle,\n  Col,\n  Container,\n  DropdownItem,\n  DropdownMenu,\n  DropdownToggle,\n  ListGroup,\n  ListGroupItem,\n  Row,\n  UncontrolledDropdown,\n  Nav,\n  NavItem,\n  NavLink,\n  TabContent,\n  TabPane\n} from \"reactstrap\";\n\nimport { MoreHorizontal } from \"react-feather\";\n\nimport avatar1 from \"../../assets/img/avatars/avatar.jpg\";\nimport avatar2 from \"../../assets/img/avatars/avatar-2.jpg\";\nimport avatar3 from \"../../assets/img/avatars/avatar-3.jpg\";\nimport { Calendar, Filter, RefreshCw } from \"react-feather\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons\";\nimport {\n  message,\n  Tooltip,\n  Popover,\n  Popconfirm,\n  Message,\n  Button,\n  Drawer,\n  Form,\n  Input,\n  Item,\n  Icon,\n  Menu,\n  Progress,\n  Checkbox\n} from 'antd'\nimport { Group } from '@vx/group';\nimport { Tree } from '@vx/hierarchy';\nimport { LinearGradient } from '@vx/gradient';\nimport {Zoom} from '@vx/zoom'\nimport {localPoint} from '@vx/event'\nimport {scaleLinear} from '@vx/scale'\nimport { hierarchy } from 'd3-hierarchy';\nimport { pointRadial } from 'd3-shape';\nimport { RectClipPath } from '@vx/clip-path';\nimport {\n  LinkHorizontal,\n  LinkVertical,\n  LinkRadial,\n  LinkHorizontalStep,\n  LinkVerticalStep,\n  LinkRadialStep,\n  LinkHorizontalCurve,\n  LinkVerticalCurve,\n  LinkRadialCurve,\n  LinkHorizontalLine,\n  LinkVerticalLine,\n  LinkRadialLine\n} from '@vx/shape';\n//import Viewer from 'react-drag-n-zoom'\n\n\nconst {TextArea} = Input\n\nclass Project extends React.Component {\n  constructor(){\n    super()\n    this.state = {\n      activeTab: \"1\",\n      layout: 'cartesian',\n      orientation: 'horizontal',\n      linkType: 'diagonal',\n      stepPercent: 0.5,\n      parent: '',\n      type: '',\n      project_id: '',\n      task: {\n        task_title: '',\n        task_desc: '',\n        status: '',\n        priority: '',\n        assigned_to: '',\n        created_by: '',\n        due_type: 'asap',\n        start_date: '',\n        end_date: '',\n        task_tag_list: []\n      },\n      new_task:false,\n      initialTransform: {\n        scaleX: 1.27,\n        scaleY: 1.27,\n        translateX: -211.62,\n        translateY: 162.59,\n        skewX: 0,\n        skewY: 0\n      },\n      spida_filter: {\n        assigned_to: false,\n        due_asap: false,\n        due_this_week: false\n      },\n      spida_tasks: {}\n    };\n    this.retrieveTask = this.retrieveTask.bind(this)\n    this.newtaskChange = this.newtaskChange.bind(this)\n    this.newAssignTo = this.newAssignTo.bind(this)\n    this.newPriority = this.newPriority.bind(this)\n    this.newStatus = this.newStatus.bind(this)\n    this.changeTranslate = this.changeTranslate.bind(this)\n    this.toggle = this.toggle.bind(this);\n    this.assignedPipeline = this.assignedPipeline.bind(this)\n    this.dateRange = this.dateRange.bind(this)\n    this.addTaskTags = this.addTaskTags.bind(this)\n  }\n\n  toggle(tab) {\n    if (this.state.activeTab !== tab) {\n      this.setState({\n        activeTab: tab\n      });\n    }\n  }\n\n  componentDidMount() {\n    console.log(\"called did mount\")\n    const project_id = this.props.match.params\n    this.props.actions.retrieveProject(project_id,this.props.match.params.subdomain)\n  }\n\n  newAssignTo (value){\n    this.setState({\n      task: {\n        ...this.state.task,\n        assigned_to: value\n      }\n    })\n  }\n\n  newPriority (value){\n    const new_priority = parseInt(value,10)\n    this.setState({\n      task: {\n        ...this.state.task,\n        priority: new_priority\n      }\n    })\n\n  }\n\n  newStatus (value){\n    const new_status = parseInt(value,10)\n    this.setState({\n      task: {\n        ...this.state.task,\n        status: new_status\n      }\n    })\n\n  }\n\n  newDueType = e => {\n    this.setState({\n      task: {\n        ...this.state.task,\n        due_type: e.target.value\n      }\n    })\n  }\n\n  dateRange (dates, dateStrings) {\n    this.setState({\n      task: {\n        ...this.state.task,\n        start_date: dateStrings[0],\n        end_date: dateStrings[1]\n      }\n    })\n    console.log(this.state.task.start_date)\n  }\n\n  addTaskTags = (incoming_tag) => {\n    this.setState({\n      task: {\n        ...this.state.task,\n        task_tag_list: incoming_tag.target.value\n      }\n    })\n  }\n\n  newtaskChange = input => e => {\n    const name = e.target.name\n    this.setState({\n      task: {\n        ...this.state.task,\n        [name]: e.target.value\n      }\n    })\n    console.log(this.state.task)\n  }\n\n  showDrawer = () => {\n    this.setState({\n      visible: true\n    })\n  }\n\n  onClose = () => {\n    this.setState({\n      visible: false,\n      new_task: false\n    })\n  }\n\n  _deleteTaskFromParent = (task_id) => {\n    this.props.actions.deleteTaskFromParent(task_id,this.props.account.subdomain)\n    message.success(\n      'Task Deleted'\n    )\n  }\n\n  _addTaskToParent = (node,type) => {\n    console.log(this.state.task)\n    let client_task_params = [\n      this.props.match.params,\n      node.data.id,\n      type,\n      this.state.task\n    ]\n    this.props.actions.addTaskToParent(client_task_params, this.props.account.subdomain)\n    message.success(\n      'New Task Added'\n    )\n  }\n\n  assignedPipeline = (data) => {\n    this.setState({\n        spida_filter: {\n          ...this.state.spida_filter,\n          assigned_to: !this.state.spida_filter.assigned_to\n        }\n    })\n  }\n\n  checkLinkScope = (node_source_target_id,type) => {\n    switch(this.state.spida_filter.assigned_to){\n      case true:\n        if (node_source_target_id == 72){\n          return (type == 'link') ? '#ff3d01' : '#9acb34'\n        }else {\n          return (type == 'link') ? '#ff3d01' : '#fffdf4'\n        }\n      break\n      case false:\n        return (type == 'link') ? '#f14603' : '#fffdf4'\n      break\n    }\n  }\n\n/*\n  _addTaskToParent = (e) => {\n    e.preventDefault()\n    let client_task_params = [\n      this.props.match.params,\n      this.state.parent,\n      this.state.type,\n      this.state.task\n    ]\n    this.props.actions.addTaskToParent(client_task_params, this.props.account.subdomain)\n    this.setState({\n      task: {\n        task_title: '',\n        task_desc: ''\n      }\n    })\n  }\n*/\n  retrieveTask = (id,action,type) => {\n    const api_type = type\n    if(action == 'details'){\n      this.setState({\n        task: id.data\n      })\n    }else {\n      this.setState({\n        parent: id.data.id,\n        new_task: true,\n        type: api_type\n      })\n    }\n    //this.showDrawer()\n  }\n\n  changeTranslate = (e,zoom,node) => {\n    console.log(node)\n    //const point = localPoint(e)\n    //const point = {x: -434.39004605833225, y: 500 / 2}\n    //console.log(point)\n    //console.log(point)\n    const inv = zoom.applyInverseToPoint({x: 1000 / 2, y: 500 / 2})\n    console.log(inv)\n    //zoom.setTranslate({translateX: 1000 / 2, translateY: 500 / 2})\n    //zoom.scale({scaleX: 1.1, scaleY: 1.1})\n  //-434.39004605833225 x\n  //4.164458423229405 y\n    console.log(zoom)\n  //  zoom.scale({scaleX: 1.1, scaleY: 1.1, point})\n\n  }\n\n  render() {\n    console.log(this.props.account)\n    console.log(this.props.account_users)\n\n    const { name, className } = this.props;\n    const {\n      width = 1200,\n      height = 400,\n      margin = {\n        top: 10,\n        left: 10,\n        right: 10,\n        bottom: 10\n      }\n    } = this.props;\n\n    if(this.props.project_status && !this.props.fetched_tasks){\n      this.props.actions.projectTasks(this.props.project.id,this.props.account.subdomain)\n    }\n    //, d => (d.isExpanded ? null : d.children)\n    const data = this.props.tasks\n\n    const { layout, orientation, linkType, stepPercent } = this.state;\n\n    const innerWidth = width - margin.left - margin.right;\n    const innerHeight = height - margin.top - margin.bottom;\n\n\n    let origin;\n    let sizeWidth;\n    let sizeHeight;\n\n    let task_drawer\n    switch(this.state.new_task){\n      case false:\n        task_drawer = <TaskDrawerDetails task_details={this.state.task} />\n        break;\n      case true:\n        task_drawer = <TaskDrawerAdd\n                        task_details={this.state.task}\n                        newtaskChange={this.newtaskChange}\n                        addTaskToParent={this._addTaskToParent}\n                      />\n    }\n\n\n\n    return (\n      <div>\n      <Container fluid className=\"p-0\">\n        <ProjectHeader\n          props={this.props}\n          toggleLink={this.toggle}\n          assignedPipeline={this.assignedPipeline}\n          spida_filter_assigned_to={this.state.spida_filter.assigned_to}\n          spida_filter_due_asap={this.state.spida_filter.due_asap}\n          spida_filter_due_this_week={this.state.spida_filter.due_this_week}\n          data={data}\n        />\n      <div className={\"popovertab tab \" + className}>\n\n        <TabContent style={{background: '#f3f0e3'}} activeTab={this.state.activeTab}>\n        <TabPane tabId=\"1\">\n          <ProjectGramBig\n\n            user={this.props.user}\n            state={this.state}\n            props={this.props}\n            project={this.props.project}\n            retrieveTask={this.retrieveTask}\n            deleteTask={this._deleteTaskFromParent}\n            task_details={this.state.task}\n            newtaskChange={this.newtaskChange}\n            newDueType={this.newDueType}\n            newAssignTo={this.newAssignTo}\n            newPriority={this.newPriority}\n            newStatus={this.newStatus}\n            addTaskToParent={this._addTaskToParent}\n            account_users={this.props.account_users}\n            project_team_members={this.props.project_team_members}\n            changeTranslate={this.changeTranslate}\n            assignedPipeline={this.assignedPipeline}\n            spida_filter={this.state.spida_filter}\n            checkLinkScope={this.checkLinkScope}\n            dateRange={this.dateRange}\n            spida_tasks={data}\n            addTaskTags={this.addTaskTags}\n          />\n\n        </TabPane>\n          <TabPane tabId=\"2\">\n          <ProjectStatistic\n            props={this.props}\n          />\n        <Row>\n          <Col lg=\"8\" className=\"d-flex\">\n            <ProjectGram\n              data={data}\n              user={this.props.user}\n              state={this.state}\n              props={this.props}\n              project={this.props.project}\n              retrieveTask={this.retrieveTask}\n              deleteTask={this._deleteTaskFromParent}\n              task_details={this.state.task}\n              newDueType={this.newDueType}\n              newAssignTo={this.newAssignTo}\n              newtaskChange={this.newtaskChange}\n              newPriority={this.newPriority}\n              newStatus={this.newStatus}\n              addTaskToParent={this._addTaskToParent}\n              account_users={this.props.account_users}\n              project_team_members={this.props.project_team_members}\n              changeTranslate={this.changeTranslate}\n            />\n          </Col>\n          <Col lg=\"4\" className=\"d-flex\">\n\n          </Col>\n        </Row>\n        <Row>\n          <Col lg=\"6\" xl=\"4\" className=\"d-flex\">\n\n          </Col>\n          <Col lg=\"6\" xl=\"4\" className=\"d-flex\">\n\n          </Col>\n          <Col lg=\"6\" xl=\"4\" className=\"d-flex\">\n\n          </Col>\n        </Row>\n        <Row>\n          <Col lg=\"6\" xl=\"8\" className=\"d-flex\">\n\n          </Col>\n          <Col lg=\"6\" xl=\"4\" className=\"d-flex\">\n\n          </Col>\n        </Row>\n          </TabPane>\n          <TabPane tabId=\"3\">\n            <h4 className=\"tab-title\">Another one</h4>\n            <p>\n              Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean\n              commodo ligula eget dolor tellus eget condimentum rhoncus. Aenean\n              massa. Cum sociis natoque penatibus et magnis neque dis parturient\n              montes, nascetur ridiculus mus.\n            </p>\n            <p>\n              Donec quam felis, ultricies nec, pellentesque eu, pretium quis,\n              sem. Nulla consequat massa quis enim. Donec pede justo, fringilla\n              vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut,\n              imperdiet a, venenatis vitae, justo.\n            </p>\n          </TabPane>\n          <TabPane tabId=\"4\">\n            <h4 className=\"tab-title\">Calender</h4>\n            <ProjectCalendar />\n          </TabPane>\n        </TabContent>\n      </div>\n\n      <Drawer\n        title={this.state.task.task_title}\n        placement=\"right\"\n        closable={false}\n        width={400}\n        onClose={this.onClose}\n        visible={this.state.visible}\n        >\n        {task_drawer}\n      </Drawer>\n\n\n  </Container>\n\n\n\n\n\n      </div>\n    );\n  }\n}\n\n\nconst gatherTasks = (task_state) => {\n  return task_state\n}\n\nconst mapStateToProps = (state, props) => ({\n  user: state.user.user,\n  account: state.user.account,\n  account_users: state.user.account_users,\n  project: state.project.project,\n  project_team_members: state.project.project_team_members,\n  project_status: state.project.project_status,\n  tasks: gatherTasks(Object.assign({},state.task.tasks)),\n  fetched_tasks: state.task.fetched_tasks\n  }\n)\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators({...projectActions,...taskActions}, dispatch)\n  };\n}\n\nexport default withRouter(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(Project)\n)\n"]},"metadata":{},"sourceType":"module"}