{"ast":null,"code":"import _objectSpread from \"/Users/johnvehr/Builder/kuuik/octoe_web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/johnvehr/Builder/kuuik/octoe_web/src/pages/hub/project.js\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport * as projectActions from \"../../redux/actions/projectActions\";\nimport * as taskActions from \"../../redux/actions/taskActions\";\nimport { bindActionCreators } from 'redux';\nimport TaskDrawerAdd from './taskDrawerAdd';\nimport TaskDrawerDetails from './taskDrawerDetails';\nimport PopoverNode from './popoverNode';\nimport ProjectHeader from './projectHeader';\nimport ProjectStatistic from './projectStatistic';\nimport ProjectGram from './projectGram';\nimport { Badge, Card, CardBody, CardHeader, CardImg, CardTitle, Col, Container, DropdownItem, DropdownMenu, DropdownToggle, ListGroup, ListGroupItem, Row, UncontrolledDropdown } from \"reactstrap\";\nimport { MoreHorizontal } from \"react-feather\";\nimport avatar1 from \"../../assets/img/avatars/avatar.jpg\";\nimport avatar2 from \"../../assets/img/avatars/avatar-2.jpg\";\nimport avatar3 from \"../../assets/img/avatars/avatar-3.jpg\";\nimport { Calendar, Filter, RefreshCw } from \"react-feather\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons\";\nimport { Tooltip, Popover, Popconfirm, Message, Button, Drawer, Form, Input, Item, Icon, Menu, Progress } from 'antd';\nimport { Group } from '@vx/group';\nimport { Tree } from '@vx/hierarchy';\nimport { LinearGradient } from '@vx/gradient';\nimport { Zoom } from '@vx/zoom';\nimport { localPoint } from '@vx/event';\nimport { scaleLinear } from '@vx/scale';\nimport { hierarchy } from 'd3-hierarchy';\nimport { pointRadial } from 'd3-shape';\nimport { RectClipPath } from '@vx/clip-path';\nimport { LinkHorizontal, LinkVertical, LinkRadial, LinkHorizontalStep, LinkVerticalStep, LinkRadialStep, LinkHorizontalCurve, LinkVerticalCurve, LinkRadialCurve, LinkHorizontalLine, LinkVerticalLine, LinkRadialLine } from '@vx/shape'; //import Viewer from 'react-drag-n-zoom'\n\nconst TextArea = Input.TextArea;\n\nclass Project extends React.Component {\n  constructor() {\n    super();\n\n    this.newtaskChange = input => e => {\n      const name = e.target.name;\n      this.setState({\n        task: _objectSpread({}, this.state.task, {\n          [name]: e.target.value\n        })\n      });\n      console.log(this.state.task);\n    };\n\n    this.showDrawer = () => {\n      this.setState({\n        visible: true\n      });\n    };\n\n    this.onClose = () => {\n      this.setState({\n        visible: false,\n        new_task: false\n      });\n    };\n\n    this._deleteTaskFromParent = task => {\n      this.props.actions.deleteTaskFromParent(task);\n    };\n\n    this._addTaskToParent = (node, type) => {\n      let client_task_params = [this.props.match.params, node.data.id, type, this.state.task];\n      this.props.actions.addTaskToParent(client_task_params, this.props.account.subdomain);\n    };\n\n    this.retrieveTask = (id, action, type) => {\n      const api_type = type;\n\n      if (action == 'details') {\n        this.setState({\n          task: id.data\n        });\n      } else {\n        this.setState({\n          parent: id.data.id,\n          new_task: true,\n          type: api_type\n        });\n      } //this.showDrawer()\n\n    };\n\n    this.changeTranslate = (e, zoom, node) => {\n      console.log(node); //const point = localPoint(e)\n      //const point = {x: -434.39004605833225, y: 500 / 2}\n      //console.log(point)\n      //console.log(point)\n\n      const inv = zoom.applyInverseToPoint({\n        x: 1000 / 2,\n        y: 500 / 2\n      });\n      console.log(inv); //zoom.setTranslate({translateX: 1000 / 2, translateY: 500 / 2})\n      //zoom.scale({scaleX: 1.1, scaleY: 1.1})\n      //-434.39004605833225 x\n      //4.164458423229405 y\n\n      console.log(zoom); //  zoom.scale({scaleX: 1.1, scaleY: 1.1, point})\n    };\n\n    this.state = {\n      layout: 'cartesian',\n      orientation: 'horizontal',\n      linkType: 'diagonal',\n      stepPercent: 0.5,\n      parent: '',\n      type: '',\n      project_id: '',\n      task: {\n        task_title: '',\n        task_desc: '',\n        status: 0,\n        priority: 0\n      },\n      new_task: false,\n      initialTransform: {\n        scaleX: 1.27,\n        scaleY: 1.27,\n        translateX: -211.62,\n        translateY: 162.59,\n        skewX: 0,\n        skewY: 0\n      }\n    };\n    this.retrieveTask = this.retrieveTask.bind(this);\n    this.newtaskChange = this.newtaskChange.bind(this);\n    this.newPriority = this.newPriority.bind(this);\n    this.newStatus = this.newStatus.bind(this);\n    this.changeTranslate = this.changeTranslate.bind(this);\n  }\n\n  componentDidMount() {\n    console.log(\"called did mount\");\n    const project_id = this.props.match.params;\n    this.props.actions.retrieveProject(project_id, this.props.match.params.subdomain);\n  }\n\n  newPriority(value) {\n    const new_priority = parseInt(value, 10);\n    this.setState({\n      task: _objectSpread({}, this.state.task, {\n        priority: new_priority\n      })\n    });\n    console.log(this.state.task.priority);\n  }\n\n  newStatus(value) {\n    const new_status = parseInt(value, 10);\n    this.setState({\n      task: _objectSpread({}, this.state.task, {\n        status: new_status\n      })\n    });\n    console.log(this.state.task.status);\n  }\n\n  render() {\n    console.log(this.props.account);\n    console.log(this.props.account_users);\n    const _this$props = this.props,\n          _this$props$width = _this$props.width,\n          width = _this$props$width === void 0 ? 1200 : _this$props$width,\n          _this$props$height = _this$props.height,\n          height = _this$props$height === void 0 ? 400 : _this$props$height,\n          _this$props$margin = _this$props.margin,\n          margin = _this$props$margin === void 0 ? {\n      top: 10,\n      left: 10,\n      right: 10,\n      bottom: 10\n    } : _this$props$margin;\n\n    if (this.props.project_status && !this.props.fetched_tasks) {\n      this.props.actions.projectTasks(this.props.project.id, this.props.account.subdomain);\n    }\n\n    const data = this.props.tasks;\n    const _this$state = this.state,\n          layout = _this$state.layout,\n          orientation = _this$state.orientation,\n          linkType = _this$state.linkType,\n          stepPercent = _this$state.stepPercent;\n    const innerWidth = width - margin.left - margin.right;\n    const innerHeight = height - margin.top - margin.bottom;\n    let origin;\n    let sizeWidth;\n    let sizeHeight;\n    let task_drawer;\n\n    switch (this.state.new_task) {\n      case false:\n        task_drawer = React.createElement(TaskDrawerDetails, {\n          task_details: this.state.task,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 269\n          },\n          __self: this\n        });\n        break;\n\n      case true:\n        task_drawer = React.createElement(TaskDrawerAdd, {\n          task_details: this.state.task,\n          newtaskChange: this.newtaskChange,\n          addTaskToParent: this._addTaskToParent,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 272\n          },\n          __self: this\n        });\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }, React.createElement(Drawer, {\n      title: this.state.task.task_title,\n      placement: \"right\",\n      closable: false,\n      width: 400,\n      onClose: this.onClose,\n      visible: this.state.visible,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }, task_drawer), React.createElement(Container, {\n      fluid: true,\n      className: \"p-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }, React.createElement(ProjectHeader, {\n      props: this.props,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }), React.createElement(ProjectStatistic, {\n      props: this.props,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: \"8\",\n      className: \"d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303\n      },\n      __self: this\n    }, React.createElement(ProjectGram, {\n      data: data,\n      state: this.state,\n      props: this.props,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304\n      },\n      __self: this\n    })), React.createElement(Col, {\n      lg: \"4\",\n      className: \"d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310\n      },\n      __self: this\n    })), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: \"6\",\n      xl: \"4\",\n      className: \"d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }), React.createElement(Col, {\n      lg: \"6\",\n      xl: \"4\",\n      className: \"d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    }), React.createElement(Col, {\n      lg: \"6\",\n      xl: \"4\",\n      className: \"d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321\n      },\n      __self: this\n    })), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: \"6\",\n      xl: \"8\",\n      className: \"d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326\n      },\n      __self: this\n    }), React.createElement(Col, {\n      lg: \"6\",\n      xl: \"4\",\n      className: \"d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nconst gatherTasks = task_state => {\n  console.log(task_state.children);\n  return task_state;\n};\n\nconst mapStateToProps = (state, props) => ({\n  account: state.user.account,\n  account_users: state.user.account_users,\n  project: state.project.project,\n  project_status: state.project.project_status,\n  tasks: gatherTasks(Object.assign({}, state.task.tasks)),\n  fetched_tasks: state.task.fetched_tasks\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(_objectSpread({}, projectActions, {}, taskActions), dispatch)\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Project));","map":{"version":3,"sources":["/Users/johnvehr/Builder/kuuik/octoe_web/src/pages/hub/project.js"],"names":["React","connect","withRouter","Link","projectActions","taskActions","bindActionCreators","TaskDrawerAdd","TaskDrawerDetails","PopoverNode","ProjectHeader","ProjectStatistic","ProjectGram","Badge","Card","CardBody","CardHeader","CardImg","CardTitle","Col","Container","DropdownItem","DropdownMenu","DropdownToggle","ListGroup","ListGroupItem","Row","UncontrolledDropdown","MoreHorizontal","avatar1","avatar2","avatar3","Calendar","Filter","RefreshCw","FontAwesomeIcon","faPlus","Tooltip","Popover","Popconfirm","Message","Button","Drawer","Form","Input","Item","Icon","Menu","Progress","Group","Tree","LinearGradient","Zoom","localPoint","scaleLinear","hierarchy","pointRadial","RectClipPath","LinkHorizontal","LinkVertical","LinkRadial","LinkHorizontalStep","LinkVerticalStep","LinkRadialStep","LinkHorizontalCurve","LinkVerticalCurve","LinkRadialCurve","LinkHorizontalLine","LinkVerticalLine","LinkRadialLine","TextArea","Project","Component","constructor","newtaskChange","input","e","name","target","setState","task","state","value","console","log","showDrawer","visible","onClose","new_task","_deleteTaskFromParent","props","actions","deleteTaskFromParent","_addTaskToParent","node","type","client_task_params","match","params","data","id","addTaskToParent","account","subdomain","retrieveTask","action","api_type","parent","changeTranslate","zoom","inv","applyInverseToPoint","x","y","layout","orientation","linkType","stepPercent","project_id","task_title","task_desc","status","priority","initialTransform","scaleX","scaleY","translateX","translateY","skewX","skewY","bind","newPriority","newStatus","componentDidMount","retrieveProject","new_priority","parseInt","new_status","render","account_users","width","height","margin","top","left","right","bottom","project_status","fetched_tasks","projectTasks","project","tasks","innerWidth","innerHeight","origin","sizeWidth","sizeHeight","task_drawer","gatherTasks","task_state","children","mapStateToProps","user","Object","assign","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport {connect} from \"react-redux\"\nimport {withRouter,Link} from \"react-router-dom\"\nimport * as projectActions from \"../../redux/actions/projectActions\"\nimport * as taskActions from \"../../redux/actions/taskActions\"\nimport {bindActionCreators} from 'redux';\n\nimport TaskDrawerAdd from './taskDrawerAdd'\nimport TaskDrawerDetails from './taskDrawerDetails'\nimport PopoverNode from './popoverNode'\nimport ProjectHeader from './projectHeader'\nimport ProjectStatistic from './projectStatistic'\nimport ProjectGram from './projectGram'\n\nimport {\n  Badge,\n  Card,\n  CardBody,\n  CardHeader,\n  CardImg,\n  CardTitle,\n  Col,\n  Container,\n  DropdownItem,\n  DropdownMenu,\n  DropdownToggle,\n  ListGroup,\n  ListGroupItem,\n  Row,\n  UncontrolledDropdown\n} from \"reactstrap\";\n\nimport { MoreHorizontal } from \"react-feather\";\n\nimport avatar1 from \"../../assets/img/avatars/avatar.jpg\";\nimport avatar2 from \"../../assets/img/avatars/avatar-2.jpg\";\nimport avatar3 from \"../../assets/img/avatars/avatar-3.jpg\";\nimport { Calendar, Filter, RefreshCw } from \"react-feather\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons\";\nimport {\n  Tooltip,\n  Popover,\n  Popconfirm,\n  Message,\n  Button,\n  Drawer,\n  Form,\n  Input,\n  Item,\n  Icon,\n  Menu,\n  Progress\n} from 'antd'\nimport { Group } from '@vx/group';\nimport { Tree } from '@vx/hierarchy';\nimport { LinearGradient } from '@vx/gradient';\nimport {Zoom} from '@vx/zoom'\nimport {localPoint} from '@vx/event'\nimport {scaleLinear} from '@vx/scale'\nimport { hierarchy } from 'd3-hierarchy';\nimport { pointRadial } from 'd3-shape';\nimport { RectClipPath } from '@vx/clip-path';\nimport {\n  LinkHorizontal,\n  LinkVertical,\n  LinkRadial,\n  LinkHorizontalStep,\n  LinkVerticalStep,\n  LinkRadialStep,\n  LinkHorizontalCurve,\n  LinkVerticalCurve,\n  LinkRadialCurve,\n  LinkHorizontalLine,\n  LinkVerticalLine,\n  LinkRadialLine\n} from '@vx/shape';\n//import Viewer from 'react-drag-n-zoom'\n\n\nconst {TextArea} = Input\n\nclass Project extends React.Component {\n  constructor(){\n    super()\n    this.state = {\n      layout: 'cartesian',\n      orientation: 'horizontal',\n      linkType: 'diagonal',\n      stepPercent: 0.5,\n      parent: '',\n      type: '',\n      project_id: '',\n      task: {\n        task_title: '',\n        task_desc: '',\n        status: 0,\n        priority: 0\n      },\n      new_task:false,\n      initialTransform: {\n        scaleX: 1.27,\n        scaleY: 1.27,\n        translateX: -211.62,\n        translateY: 162.59,\n        skewX: 0,\n        skewY: 0\n      }\n    };\n    this.retrieveTask = this.retrieveTask.bind(this)\n    this.newtaskChange = this.newtaskChange.bind(this)\n    this.newPriority = this.newPriority.bind(this)\n    this.newStatus = this.newStatus.bind(this)\n    this.changeTranslate = this.changeTranslate.bind(this)\n  }\n\n  componentDidMount() {\n    console.log(\"called did mount\")\n    const project_id = this.props.match.params\n    this.props.actions.retrieveProject(project_id,this.props.match.params.subdomain)\n  }\n\n  newPriority (value){\n    const new_priority = parseInt(value,10)\n    this.setState({\n      task: {\n        ...this.state.task,\n        priority: new_priority\n      }\n    })\n    console.log(this.state.task.priority)\n  }\n\n  newStatus (value){\n    const new_status = parseInt(value,10)\n    this.setState({\n      task: {\n        ...this.state.task,\n        status: new_status\n      }\n    })\n    console.log(this.state.task.status)\n  }\n\n\n  newtaskChange = input => e => {\n    const name = e.target.name\n    this.setState({\n      task: {\n        ...this.state.task,\n        [name]: e.target.value\n      }\n    })\n    console.log(this.state.task)\n  }\n\n  showDrawer = () => {\n    this.setState({\n      visible: true\n    })\n  }\n\n  onClose = () => {\n    this.setState({\n      visible: false,\n      new_task: false\n    })\n  }\n\n  _deleteTaskFromParent = (task) => {\n    this.props.actions.deleteTaskFromParent(task)\n  }\n\n  _addTaskToParent = (node,type) => {\n\n    let client_task_params = [\n      this.props.match.params,\n      node.data.id,\n      type,\n      this.state.task\n    ]\n    this.props.actions.addTaskToParent(client_task_params, this.props.account.subdomain)\n  }\n\n/*\n  _addTaskToParent = (e) => {\n    e.preventDefault()\n    let client_task_params = [\n      this.props.match.params,\n      this.state.parent,\n      this.state.type,\n      this.state.task\n    ]\n    this.props.actions.addTaskToParent(client_task_params, this.props.account.subdomain)\n    this.setState({\n      task: {\n        task_title: '',\n        task_desc: ''\n      }\n    })\n  }\n*/\n  retrieveTask = (id,action,type) => {\n    const api_type = type\n    if(action == 'details'){\n      this.setState({\n        task: id.data\n      })\n    }else {\n      this.setState({\n        parent: id.data.id,\n        new_task: true,\n        type: api_type\n      })\n    }\n    //this.showDrawer()\n  }\n\n  changeTranslate = (e,zoom,node) => {\n    console.log(node)\n    //const point = localPoint(e)\n    //const point = {x: -434.39004605833225, y: 500 / 2}\n    //console.log(point)\n    //console.log(point)\n    const inv = zoom.applyInverseToPoint({x: 1000 / 2, y: 500 / 2})\n    console.log(inv)\n    //zoom.setTranslate({translateX: 1000 / 2, translateY: 500 / 2})\n    //zoom.scale({scaleX: 1.1, scaleY: 1.1})\n  //-434.39004605833225 x\n  //4.164458423229405 y\n    console.log(zoom)\n  //  zoom.scale({scaleX: 1.1, scaleY: 1.1, point})\n\n  }\n\n  render() {\n    console.log(this.props.account)\n    console.log(this.props.account_users)\n    const {\n      width = 1200,\n      height = 400,\n      margin = {\n        top: 10,\n        left: 10,\n        right: 10,\n        bottom: 10\n      }\n    } = this.props;\n\n    if(this.props.project_status && !this.props.fetched_tasks){\n      this.props.actions.projectTasks(this.props.project.id,this.props.account.subdomain)\n    }\n\n    const data = this.props.tasks\n\n    const { layout, orientation, linkType, stepPercent } = this.state;\n\n    const innerWidth = width - margin.left - margin.right;\n    const innerHeight = height - margin.top - margin.bottom;\n\n\n    let origin;\n    let sizeWidth;\n    let sizeHeight;\n\n    let task_drawer\n    switch(this.state.new_task){\n      case false:\n        task_drawer = <TaskDrawerDetails task_details={this.state.task} />\n        break;\n      case true:\n        task_drawer = <TaskDrawerAdd\n                        task_details={this.state.task}\n                        newtaskChange={this.newtaskChange}\n                        addTaskToParent={this._addTaskToParent}\n                      />\n    }\n\n\n\n    return (\n      <div>\n\n      <Drawer\n        title={this.state.task.task_title}\n        placement=\"right\"\n        closable={false}\n        width={400}\n        onClose={this.onClose}\n        visible={this.state.visible}\n        >\n        {task_drawer}\n      </Drawer>\n\n      <Container fluid className=\"p-0\">\n        <ProjectHeader\n          props={this.props}\n        />\n        <ProjectStatistic\n          props={this.props}\n        />\n      <Row>\n        <Col lg=\"8\" className=\"d-flex\">\n          <ProjectGram\n            data={data}\n            state={this.state}\n            props={this.props}\n          />\n        </Col>\n        <Col lg=\"4\" className=\"d-flex\">\n\n        </Col>\n      </Row>\n      <Row>\n        <Col lg=\"6\" xl=\"4\" className=\"d-flex\">\n\n        </Col>\n        <Col lg=\"6\" xl=\"4\" className=\"d-flex\">\n\n        </Col>\n        <Col lg=\"6\" xl=\"4\" className=\"d-flex\">\n\n        </Col>\n      </Row>\n      <Row>\n        <Col lg=\"6\" xl=\"8\" className=\"d-flex\">\n\n        </Col>\n        <Col lg=\"6\" xl=\"4\" className=\"d-flex\">\n\n        </Col>\n      </Row>\n  </Container>\n\n\n\n\n\n      </div>\n    );\n  }\n}\n\n\nconst gatherTasks = (task_state) => {\n  console.log(task_state.children)\n  return task_state\n}\n\nconst mapStateToProps = (state, props) => ({\n  account: state.user.account,\n  account_users: state.user.account_users,\n  project: state.project.project,\n  project_status: state.project.project_status,\n  tasks: gatherTasks(Object.assign({},state.task.tasks)),\n  fetched_tasks: state.task.fetched_tasks\n  }\n)\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators({...projectActions,...taskActions}, dispatch)\n  };\n}\n\nexport default withRouter(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(Project)\n)\n"]},"metadata":{},"sourceType":"module"}